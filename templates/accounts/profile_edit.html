{% extends "core/base.html" %}

{% load thumbnail %}

{% block custom_css %}
    <link rel="stylesheet" href="{{ MEDIA_URL }}css/chosen.css"/>
{% endblock %}

{% block custom_js %}
    <script src="{{ MEDIA_URL }}js/chosen.jquery.min.js"></script>
    <script>
	$(function()    {
	    $(".chzn-select").chosen();
	});
    </script>
{% endblock %}

{% block app_body_content %}
    <div>
	<ul class="tabs">
	    <li><a href="#viewprofile">View Profile</a></li>
	    <li><a class="active" href="#editprofile">Edit Profile</a></li>
	</ul>
	<ul class="tabs-content rounded">
	    <li id="viewprofileTab">
		<div class="wrap">
		    <h4 class="fullname">{{ user.get_full_name }}</h4>
		    <hr class="half-bottom"/>
		    {% if user.profile.photo %}
			{% thumbnail user.profile.photo "138x138" crop="center" as up %}
			    <img class="add-bottom display-picture" src="{{ up.url }}" width="{{ up.width }}" height="{{ up.height }}"/>
			{% endthumbnail %}
		    {% else %}
			<img class="add-bottom" src="{{ MEDIA_URL }}img/no-image.jpg"/>
		    {% endif %}
		    <h5>About</h5>
		    <hr class="half-bottom"/>
		    <p>{{ user.profile.about }}</p>
		    <h5>Voice Bank URL</h5>
		    <hr class="half-bottom"/>
		    <p>
			<a href="http://{{ site }}/{{ user.profile.slug }}">
			http://{{ site }}/{{ user.profile.slug }}
			</a>
		    </p>
		</div>
	    </li>
	    <li class="active" id="editprofileTab">
		<form id="profile-edit" method="post"
		    enctype="multipart/form-data" action="{% url profile_edit %}">{% csrf_token %}
		    <fieldset class="wrap remove-bottom">
			{{ form.user.as_hidden }}
			<p class="one column alpha remove-bottom">
			    {% if user.profile.photo %}
				{% thumbnail user.profile.photo "50x50" crop="center" as up %}
				    <img class="display-picture" src="{{ up.url }}" width="{{ up.width }}" height="{{ up.height }}"/>
				{% endthumbnail %}
			    {% else %}
				<img src="{{ MEDIA_URL }}img/no-image-small.jpg"/>
			    {% endif %}
			</p>
			<p class="three columns" style="padding-top: 28px;">
			    {{ form.photo.errors }}
			    {{ form.photo }}
			</p>
			<br class="clear"/>
			<p>
			    <label class="input">
				{{ form.first_name.errors }}
				<span>{{ form.first_name.label }}</span>
				{{ form.first_name }}
			    </label>
			</p>
			<p>
			    <label class="input">
				{{ form.last_name.errors }}
				<span>{{ form.last_name.label }}</span>
				{{ form.last_name }}
			    </label>
			</p>
			<p>
			    <label class="input">
				{{ form.about.errors }}
				<span>{{ form.about.label }}</span>
				{{ form.about }}
			    </label>
			</p>
			<p>
			    <label class="input">
				{{ form.phone_number.errors }}
				<span>{{ form.phone_number.label }}</span>
				{{ form.phone_number }}
			    </label>
			    <span class="help">{{ form.phone_number.help_text }}</span>
			</p>
			<p>
			    <label class="input">
				{{ form.url_id.errors }}
				<span>URL ID</span>
				{{ form.url_id }}
			    </label>
			    <span class="help">{{ form.url_id.help_text }}</span>
			</p>
			<p>
			    <label class="input">
				{{ form.location.errors }}
				<span>{{ form.location.label }}</span>
				{{ form.location }}
			    </label>
			</p>
			<button>Save</button>
		    </fieldset>
		</form>
	    </li>
	</ul>
    </div>
{% endblock %}
