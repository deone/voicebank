{% extends "forms_base.html" %}

{% block page_title %}&mdash; Log In{% endblock %}

{% block nav_items %}
{% with urlname=request.resolver_match.url_name %}
  <ul class="nav navbar-nav navbar-right">
    <li><a href="{% url 'about' %}">About Us</a></li>
    <li><a href="{% url 'all_clips' %}">Find Voices</a></li>
    <li><a href="#">Blog</a></li>
    <li><a>+234 803 493 0227</a></li>
    <li><a href="{% url 'join' %}">Sign Up</a></li>
    {% if user.is_authenticated %}
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
          {{ user.get_full_name }} <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
          <li><a href="{% url 'profile_edit' %}">Edit Profile</a></li>
          <li><a href="{% url 'voiceclips' %}">Upload Voice Clip</a></li>
          <li role="separator" class="divider"></li>
          <li><a href="logout">Log Out</a></li>
        </ul>
      </li>
    {% else %}
      <li {% if urlname == 'login' %}class="active"{% endif %}>
        <a href="{% url 'login' %}?next={{ request.path }}">
          Log In
          {% if urlname == 'login' %}
            <span class="sr-only">(current)</span></a>
          {% endif %}
        </a>
      </li>
    {% endif %}
  </ul>
{% endwith %}
{% endblock %}

{% block form %}
<div class="form-wrap">
  <form method="post" action="{% url 'login' %}?next={{ next }}" class="form-horizontal login">
    <div class="page-header">
      <h1>Log In</h1>
    </div>

    {% csrf_token %}
    {{ form.non_field_errors }}
    <div class="form-group">
      {{ form.username.errors }}
      <label for="email" class="col-sm-2 control-label">Email</label>
      <div class="col-sm-10">
        {{ form.username }}
        <span class="help-text">{{ form.username.help_text }}</span>
      </div>
    </div>

    <div class="form-group">
      {{ form.password.errors }}
      <label for="{{ form.password.id_for_label }}" class="col-sm-2 control-label">{{ form.password.label }}</label>
      <div class="col-sm-10">
        {{ form.password }}
        <span class="help-text">{{ form.password.help_text }}</span>
      </div>
    </div>

    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-6">
        <button type="submit" class="btn btn-primary">Log In</button>
        <a class="btn btn-default" href="{% url 'join' %}">Sign Up</a>
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-6">
        <a href="#">Forgot Password?</a>
      </div>
    </div>
  </form>
</div>
{% endblock %}
