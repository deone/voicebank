{% extends "base.html" %}

{% load musicbox_tags %}

{% load vbank_tags %}

{% block app_body %}
<div class="leftdiv">
    <div class="categories">
	<h3>Voice Artist Categories 
	    <span class="alt">
		<a href="{% url 'booking.views.index' %}">Book your recordings here <em>&raquo;</em></a>
	    </span>
	    <span><a href="{% url 'all_clips' %}">View All Voice Clips <em>&raquo;</em></a></span>
	</h3>

	<ul>
	    {% for category in categories %}
		{% if forloop.counter == 5 or forloop.counter == 10 %}
		<li class="last">
		    <a href="{{ category.get_absolute_url }}">
			<span>{{ category.name }}</span>
			<img src="{{ category.image.url }}"/>
		    </a>
		</li>
		{% else %}
		<li>
		    <a href="{{ category.get_absolute_url }}">
			<span>{{ category.name }}</span>
			<img src="{{ category.image.url }}"/>
		    </a>
		</li>
		{% endif %}
	    {% endfor %}
	    <li>
		<a href="{% url 'all_clips' %}" class="allvoice"></a>
	    </li>
	</ul>
    </div> <!--/categories-->

    <div class="musicbox">
	<h3>Music Box</h3>
	<ul class="mbox">
	    {% display_albums 5 %}
	</ul>
	<a href="{% url 'musicbox_home' %}" class="more">View More</a>
	<div class="clear"></div>
    </div>

    <div class="feature">
	<div class="recent">
	    <div class="upper">
		<h3>Most Recent Additions</h3>
		{% if voiceclip_list %}
		    {% display_voiceclip_list %}
		{% else %}
		    <p> There are no recent voice clips.</p>
		{% endif %}
	    </div>
	    <div class="lower">
		<a href="{% url 'all_clips' %}">View All<em>&raquo;</em></a>
	    </div>
	</div>

	<div class="additions">
	    <div class="upper">
		<h3>Top 5 voice clips</h3>
		{% if top_clips %}
		<ul>
		    {% for clip in top_clips %}
		    <li>
			<div class="capitalize">{{ clip.name }} by 
			    <a href="{{ clip.user.profile.get_absolute_url }}">
				{{ clip.user.get_full_name }}
			    </a>
			</div>
			<span id="audioplayer_{{ forloop.counter0 }}">{{ clip.name }}</span>
			<script>
			    AudioPlayer.embed("audioplayer_{{ forloop.counter0 }}", {
				soundFile: "{{ MEDIA_URL }}{{ clip.voice_clip }}",
				titles: "{{ clip.name }}"
			    });
			</script>
			<span class="numeric">{{ forloop.counter }}</span>
			<div class="date">Added {{ clip.date_added }}</div>
		    </li>
		    {% endfor %}
		</ul>
		{% else %}
		<p>No voice clips yet.</p>
		{% endif %}
	    </div>
	    <div class="lower">
	    <a href="{% url 'all_clips' %}">View All<em>&raquo;</em></a>
	    </div>
	</div>
    </div> <!--/feature-->

</div> <!--/leftdiv-->
{% endblock %}

{% block custom_js %}
<script src="{{ STATIC_URL }}agon_ratings/js/jquery.raty.js"></script>
<script>
    $(function()    {
	    $('#slides').slides({
		    preload: true,
		    preloadImage: '{{ STATIC_URL }}img/loading.gif',
		    play: 8000,
		    pause: 2500,
		    hoverPause: true
	    });
	    $('a#home').addClass('current');
    });
</script>
{% endblock %}
